services:
  kali-linux:
    networks:
      - proxy
    labels:
      traefik.enable: "true"
      traefik.http.routers.kali.rule: Host(`${DOMAIN_HOST}`)
      traefik.http.routers.kali.entrypoints: websecure
      traefik.http.routers.kali.tls.certresolver: letsencrypt
      traefik.http.services.kali.loadbalancer.server.port: 3000
      traefik.http.routers.kali.middlewares: ip-allowlist@file
      traefik.docker.network: proxy

networks:
  proxy:
    external: true
